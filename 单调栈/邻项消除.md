# [2197. 替换数组中的非互质数](https://leetcode.cn/problems/replace-non-coprime-numbers-in-array/)

用栈来模拟 “邻项消除问题的通用解法”
1. 创建一个空栈。
2. 从左到右遍历 nums。
3. 设 x=nums[i]。如果栈不为空且 x 与栈顶不互质，那么弹出栈顶 y，更新 x 为 LCM(x,y)。循环直到栈为空或者 x 与栈顶互质。
4. 把 x 入栈。
5. 遍历结束，栈即为答案。

本题目应该注意 新加入的x需要 贯穿到栈底部
```python
class Solution:
    def replaceNonCoprimes(self, nums: List[int]) -> List[int]:
        def gcd(a, b):
            if a < b:
                a, b = b, a
            while b:
                a, b = b, a % b
            return a
        
        def lcm(a, b):
            return a * b // gcd(a, b)
        
        ans = [] # maintain a stack
        for x in nums:
            ans.append(x)
            while len(ans) > 1 and gcd(ans[-1], ans[-2]) > 1:
                x1, x2 = ans.pop(), ans.pop()
                ans.append(lcm(x1, x2))
        return ans
```